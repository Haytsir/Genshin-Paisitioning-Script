// ==UserScript==
// @name            Genshin-Paisitioning Script
// @name:ko         원신-파이지셔닝 스크립트
// @namespace       genshin-paisitioning/script
// @version         1.6.9
// @author          Haytsir
// @description:en  Show realtime in game location in the Teyvat Interactive Map, in browser and mobile phones!Support genshin.gamedot.org.
// @description:ko  원신 게임닷 지도에서 실제 게임에서의 캐릭터 위치를 실시간으로 보여줍니다, 브라우저와 모바일 동시에 사용 가능!
// @icon            https://genshin.gamedot.org/asset/xapp-icon128.png.pagespeed.ic.zyAE0ntk9a.webp
// @downloadURL     https://github.com/Haytsir/Genshin-Paisitioning-Script/raw/gh-pages/userscript/genshin-paisitioning-script.user.js
// @updateURL       https://github.com/Haytsir/Genshin-Paisitioning-Script/raw/gh-pages/userscript/genshin-paisitioning-script.user.js
// @match           https://genshin.gamedot.org/?mid=genshinmaps
// @grant           GM_addStyle
// @grant           GM_getValue
// @grant           GM_setValue
// @grant           unsafeWindow
// ==/UserScript==

(i=>{if(typeof GM_addStyle=="function"){GM_addStyle(i);return}const o=document.createElement("style");o.textContent=i,document.head.append(o)})(' @charset "UTF-8";.gps-user-marker{position:absolute;z-index:99;transition:opacity .2s;opacity:1;pointer-events:none}.gps-user-marker.hover{opacity:.5;z-index:inherit}.gps-user-position{display:none;border:none;background:transparent no-repeat center;background-size:contain;z-index:10001!important;transition:all .2s;--dir: 0deg;--rot: 0deg}.gps-user-marker.gps-pinned:before{clear:both;content:"";display:block;position:absolute;border-radius:50%;margin:-2px;height:4px;width:4px;background:#34ace0;transform:scale(1);box-shadow:0 0 #34ace0;animation:pulse-blue 2s infinite}.gps-activated .gps-user-position{display:block;width:0px;height:0px}.gps-user-marker.hide{display:none!important}.gps-user-position:before{content:" ";display:block;width:48px;height:48px;margin:-24px;background:transparent no-repeat center;background-size:contain;background-image:url(data:image/png;base64,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);position:relative;z-index:3;transform:rotate(var(--dir));transform-origin:center;transition:transform .2s}.gps-user-position:after{content:" ";display:block;position:relative;background:transparent no-repeat center;background-size:contain;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIUAAABhCAYAAAD4D2KoAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABtZSURBVHhe7Z0F2G5bVYWBS19CQBpERQxsxRYwUTGxCwNbUTGwRcLCQMVusRW7uzHAAAVM7C7shut4151jPWPPb+3vnMM9994T33qecdfuWPPdY869///89waXarvqqqtuiHK66UbRW6v1B/Ix6U/tAm8KVAYyg21dsaMbL5ZZ3i+P4ekNLKgu5dSuy7YKhOQgOWhdBD11k0W/N02/Uj9HXgOa11eXfmrnq8Xg5oA7CPQOkIPloKKbtumlnv/859/sDNOr43WtYMlrPkFyTVsNoAfTA+vBTgAShBFMREArqDfP3tM1fwtPn618jDiWz+lr8DVZHZITHOfSYsD2IEAbABZBygDewtL8LXPa0vyVOZ9a7Vf9PDbTNd+vo8PSITkBcqzF4CQMHYQNBJreBF/9QdA1fWWXlt+qS8tvvVqeiv3HcelTWraBBGn+GCAJh3V5A1IDkBC4NwS7IDD4SNMHwdd8BvLWodtEvyvtd9vF8tx/qJ0nzz8AcV/TGyfRfEJi8BOSywsO33DdvAfCA+PB6jXBBABpfg+AGUgtu23ohdr0Md1usezgOHkuaQOL+glJaZlqNH0mOAYgNXSXXuPmSukIaLpCDNbGDdQPAKKfQZA6BATOgaW/ndbf/ojusNNv5GM1dWgSlgM3UT9TjfoVIB4Lj43BuLTg4GZKCYNv/iYxKDM1qD9wBPUdAAdjBEbLR+DoJQI7pGUv7D6lZXdM5TJP5/a1bB43lMAYxHFtWjcBQVo2XUTTB4CUVu5xacDBxceNdGdYFYwTBPWZEgYMmvfT6IHfAKD5ZbClO4XuvOjPRnmMeWyfs847IUFalqAMSJDWbVxE03uAdDgu7rTCBdeFd2cYN6qbnylC/QqEDsEAQctt5xME9Rn8TTC1/i6W5u9auttimr7L20zFscax6UuGZfRa110lIfF9DUDUzxQjDTCQple1hx+sCQaqYb8wW12kYUggpjNww0jLJgzqe2owDBMETXugE4IBgtbtBf/upZy+x47uuVhmeV8fawNOO78hMSgdko2LaH6mGM1POJCWreBYOceFBwYXVeruMF0B1U12GBiMlSOMQdR8d4M7adkKgAw8IpgEekjbv0iXlt/rmGK7eZzQCpoJCtK+CUkHxLD7vndTi/oJh3q7RofjwgGDi5ESBuQLf4Fg0HQHYaYD9R0CB2YTeM07sC9qaf7F3Nf0i3s6l62W1zofZwMN0nzCYkAmJNrmwEW0rAPiGmSTWjR9AAfSNGAgO8b16xqcPC7EMBy4gzSsUDoKg/osFAcImk9H8CAPAJDWHQRf05vgWlp279JLLPqVcpt753Fi+gAW9QmJgZ0uonWGA+25R6aWjXNIeyllA0eF6bprOmmvHY7CgLQu64WRU7Wsp4ieGhKEAYPWbUBQvwFA8yOIkoN7n9JLNr1UKadzPre1OI6P6ePvQiKlkxwAgrSOe+3OwZhsXEMaD5Q0XKOUKSXBMBzXvmtwkpKBOHAH9atUYSDG9wRp3Lh0zBUYvI0jqN9AoOkEwIF3P4Ks7V4aafplQveNPpXbTPkYdZwOEOezBiRI2w5I1G/SjfqeYpapRRrOoXUHcGh6mVLU91rj2gejTmISJwyl8VYhHYVB05kmsk5ADNR4orTcT9iEQVq5wHiKtU0GzgF1sF+26eVKLx/Tq/kU+x0A1M7bQTlwEvUzzag3HCtAhnMgTXfnWKYUpGngSNcYYKAK4/lpddB0B3Q27jDqBk3bHUYOldIZ7AoM0NIV1KcboOkC6hMAB9w9QX6Fplfs0nFeCeV8ri+xL8dbgXMAinoDYkgOHKSU6WXpHpqeNYemD+BQv+cajtX5BcMHkwzEQbqoi+q1Axc+6gb1m5pBfaaI6QqSB6qDsHEDTScECUBCkMF+5dCrWFr3qqgvy3lp7hvHOxMsExJt313ELtcBOUgtWjbBkGbNoX7UZNIypUg9ndjdr3kBqoN0hxhASEt3UJ8wpDuMukEyDGg4g3TMFbojGARDsAfAJshI0/crvdqOXn2xLHW/OM4GmDpvh8SAGNzuINzfhEOazqFlCUevORhPxnWmFE0vaw0pwSB+AwxUIT63ph0TCA46fnil/igQmp61g/oBg6bTHTZpQjIMfoLsDAzeCgTkAPgpngCoz+ATaPQapdeMPvVaOz3yvpaPOUCx6ty+jnQUX7MBua/W2T0O4FBP7ZRFKWB0ODavsZp2OsGlDxwDaTpd49zTSe2QQHDA4RCSX4cGDHUhADG/N6hfuQM3toGhtHEGrbcr+AkzDOkG3QH8NBsAB9QBfu3Q66ykY70uWqzLfdEKGEOSoAwnqetNF5lwSN09xoOhZcM5NN0LUsaR8eyu4Vpjk06kWWdIjmE6xtlBURuzEzsjv2EcvF2oT3cwEOkOhmG6g5Q1w3QFLcsUwcChmRrUD0fQdIKQLpDBn0HV9g72/UsPWOiBO/J673v/OF5Cw7lRh+TAQdQbDkA/BsdMK5rucCxdQ/0AA2l+uobUC9CNY1To140NauMDIDQ90oW0edWU/BFqr5AcdUMpXyu7MxgGBmvAIB0DwYEYEGibESykeQf/gZp/Pfc1/frSG1RvMZ/KdUOxf8IygdE6zmsouS67CdeLDEh3j4PUoh44GJ9VSlm5BmOfrnGQTiQ/1AbDjoHWqUQL7RCGYtYQUgJxUD9IPV0Md9A2M1VoOovI8SahHhDOBEOCMNOB1h0AgLTMgbcI8htaWv9G6t/4bMX2luZ9nAlOnc+gJCDpIk4100EkF6orOHhIdlOKtCpEezqZYEjErRego06UHPNt8akFBzUEO9YBMmVk/bD3qrnnDhMGpOkNDFo2UoT67goGAQ1HUN+dYAOAljmIBPZB0ptEj9606c1KfTnyPj4GmsCoNyQDlLqeCYnmDYjvwe6xgUPbcf9OK4zLSCuSXSOdoxeiq+8arjPG24n64RjqEwynEkyA+F+dTviPZFomEOqnQ6jvQLh+AAi7A3Y2agepu0NPFS4gjznDxhXUr0DoEDhoPfAE/MGhNw+9xU5v5X4o4TEsK0j2AEn3GHBoOffd4ZiuoWWMm99UGE8X6XaNg3SifRKMA8eQssbYpBKgYGKkC+lMNUQ6xNmkC9whgUh3mDBIK2dIV1iCoD6dAGXwHVSC/Jalt2p66x3lNt7Px+B4BqeDwjUMJ6nrG4DUte+5B/dLapnOofVZkK7gGIWolGDMdCKlY8zvGRJwDDCkkQW0zG8mBuPqNFILDhxCMhCzoFS/C4Q0PkJJdgfXDnaHAYOWcdNZQO7B8ABNM6ArEOwABiEBcEBHkLXf2yBNP6T0tqG3a/NdD/H+dYwOjkExJL6mdJGle2jacOAe3TmyIN11Dc1nOtmtMzS/SSWlnkrg4OqCk4laeCxlTCDUZ/0wgZA27iDlW8VMFdou04TfJDJN2BkGDNKwZylhMAh+gicA6jPwBP3tLa1/B0vz74j6spie+0kcxwDRT1g0bUgSEMR12kFW7rFyDhek3TX2ao356iqt6owDx9D0AEP9TCUS8d++gbBAG42iUpopQ/3mC6V6TjTrB833bw9QbCBm7aD1wx2kTBUDBokBSWcgTSQMDKxhsCMMJ9D26QAO3Ai+eoL+TqF3Dr3LGZTbIh9jQKM+Ydm4inoDguwghuNB2sZwpHNkzTFdQ2K8lrWGNN9QtH71djJTiYRjLGsMiTSy/l7BCgmnWKYM9XaICYT6rB8SCC5+r3boqSJrBsPgWsGukKmhO4IDNJ58yYHMIL+r9G6ldw89tJTzud77sD9KYDooE5C6vpWD2D1G7SEdOIeU9caq1mBcAQPXsGPsgcEDnGBsHEPCLc74AetG2pBvEasaghNgTZyQPMYF4A7zdVM9FzrrB6mni4NUIY0CUst4gvZgMAi27+4GhsDBy+C/R+g9kfZ9rz15vbeVcv+EpYMyAJEy3QBu1iDcj2uPA+eQhmtIrjWcUmatITGudg1/8NpzjN1Uop6H/+x+OMaGEk6RQLiGGEBIdogsKOfbheZ7upi1g5SpIusGBomnaAWD04MdoYNAkHjKl8HX9HuXHia9T+h9S7nMYltr7F/HSlDSWTaAaFvXJnYQA2LnyLTimmPPNTZgqM90cs5gSLjFuf20VDtcoQPwdcxAjJQhdSD8urlXP+AOM11Ie+6wB8NwBk2nKxgEB2OCoO0MgINPwN/P0vr3T2nZB7jvim28f8IzQZEMyS4g0qw/dEzuK9OKnWNVb7jWYPxW6WTWGZqfYEgUoHs1Bk5xRYX63Bo76gA4BWljAiGtUgYXNl83JS4curmRXkimOwADAzILSG2zSROSXcGOwKAPV9C2CQEaEGj5DHrpA6UPCn1w6UNKnre8Te7TYUmXGZDU9QCJAeF6Dcem9tA092nncL0xUoq0qTXUZxHKuPY6ozvGfTS9cgyc4gUDwo0D6EAQNmoITqTpVcrYqx8OgFCf7rB5m5BWaYJBNQzdEdINEgBDQGAd+IdLH9r0YU19Pfsg75/QcA47TTrJw+r67CDdORKOfGPJlHKs1gAMxnf8kE2yY1DHbVKJlI5BCrlmQLjpQDfWAfkeMYGQ8pVzACHhECsgnC6ydnAhmaki0wSDl2liwCDZFcZTqu3tBgRoDwCC/eHSI0ofEfrIkOfpvW0qwTEs6SaGMgGxezi9uEAFdhelvd5I1/AbSgfjoM6QOhi8mYwaQz3xu3GF9Pw0DqgDQ1t+sh5vGJrnl1/sEKOg1Hy+XdgdDAQwcON2h6wbls4g2RWc3w0CwUgIDADqQf8o6aNDj2zystzG++Rx9iDhOoBkOIi0gUNapZVRkKofriElGIzTSCc1fk4nHYz5Y3mJB3TjGOpx+PMLhJsOzI/TqScMxCgqJS7INUR3iFUxyU1n7dDrBgaNwds4g7bHFXpaIBgGgUAZBAfTAf+Y0sciHevjkKY/vsvrav3YXmLfhIfjc550FQNiOJxiDEfWHYaD+x0pRRquofXH0sl0DM27AF05xqgxJNLHTSqE107jBDoR6SOBsEP4+8OqfnAxOdKFNGoHrU93YIAGDFrOwCUMPHmGIV1hBcIm+Ood8E+QPrH0SUfkbSz2QxMYTSckHRAA5dqAA3U47ByZUs7kGgkGhTpg8Np6kEokF5+4+rULhJtOxA/PoNA1RDrE2QKxKiQfqn0Mg1NFhyFdwSDYCRKCDsAnS48qfUr0Q9rv0Tlf8vaI/ZGhmZCoTycxIAkH123nyLSSrjFrDS0zGLhogpF1hlNJB8OphPRx0wrZddM4oU5MChlAaH44hJQpgxvwG4aBcLoAiKwdNnWD9neqSGfIOmE6grYlMH6aDcEm6NJjSo8tPe6IvE3qMTrPo5GmE5QVIE4xdg+u23UH95M1x0gpEvfvWmMvnUwwtGw4hvqsMfy6Sp133QLhppPzuxe4xcYhJEi2Q+TrZtYP0x2kCYSOkXUD1msY7AwrGBKER2k5gTMADvSnSp9W+vTQZ4RyOfL2iP3RAATVeewoE5C6LsPRncM1R3cN4GAcSCmMC+NjMEizgLFxDC1bpRLicbMK0fXTuACJFNId4gAIrcMW0yH88Slrh3QH1wwMqtNEh4FgpBsYAOTgjqBrv89Emn586bOOyNs8vvZJcAyJXYXzJhwAegwOpxTgsGsMMLRPFqEJxsoxeo3Bp4DrFwg3XRi/2kUK4QI3NUTdSBaU5M3hEFrGAJAuGBDXDukOWO+sGbQ9gwwIhsGuYEcgUATMAezB/2zpc0NPKHk616HPiZ59Jyw6r0Gxk3D+dI8Jh0SNk3BkSumuYTBwDIPhOsNgpGMYDMb/5hWSC6NxQbowclsHwg5hILhRbnjWDxIDgjswQOkOpIpHan9gYGAZ5OEMWmYYViAYAAeVgH9e6fOlL6gePbHmu7ze+yVAExJdh93HDtLdozsHqc/1hl2jg0EaTTBGASqlYxgMajbG/RYVigurcWES79HTIaSsIVZA9HSR7sDTBQyuGZwiNjBUUBKEFQQEH32h9EWhLy71aYvtUcLDMQ2JAbF7ZHp5rJYB76w5NN9TSrqGi9BRZ2hbwHABugcGqePCBMJNF8sv6VBoHnMI0oWB2EsXCUQWjzyJdoZ0BZ7gDoEDSqC/JPSl0pdF/+XVp1iHcj+OY0AMiV2E8w/3kLgupxbgyJojXYP7xDUMxqwztJ76igeH8cpUMmsMiR+337KG/sJuXKgumDTionLjEHXDHQinC+zVMIxUIdkdVjD4iQWGdAKDkIH/itJXhr6qlNOe9/YoYUlAULqH08tILeq5XsAYNYfklGLX6OnEdYYdI8HwWwkP2oMvGiDcdNH87h+V8l7KWAFhd+BpyiKSQfVbBEAw6OkMwNBB6BA42F8tfU3oa3fk9WyPEhSObXfpDsL1cF0dDoB2vWHXAHzul/s2GKtU0msMxvXKGuqLq3HhEmnEbxl7QGS66EAMd6iBdc2QMBAMgmK7NwwGYQZfx/g69U+Svr7pG3Z6tn0S+9W+PpYB4xyGg3MbDjuH4Rg1h+SU8ri6P6eTDsbSMbQP40iddnEC4aYb4VfJSSMGgieAG/YbxgEQkmsHuwOpAhiwZwaaQU8YCIpBsBN0CAg0+sbSN0nfvJCX0yNvP0Gp49pNOJ8dZA8Ornu4htTBwDUSDMYjwUjH4PcwblVDe3E33Qy/Sk4+3AOCd3kGxvXDAEID4LeK7g6kCsPAkzphCBAMgYNLoL9F+tbSt1na59utWO5t6NkvQemApHsYDqcVrtcFaaYTgHed0R3DYLj4ZNwYv1vXkF4ajRuSyIncKNX2QQ0hMUCuH7DbTBfdHfZgIFgJwgiug440/x2h74zeyvVPrn0MCDIg00Hq/LiH0wpwdNdwOjlbMMZbibYlbVxaQLjpxvh3BryOGgg7xAaIGjCAYADTHXj6nCoYfMPg9ECQDkDQtAP8XaHvlr7niFjv7RKUJ0t2EzuI4ejOka7B9XMfBsN1BmDka2uCwThRi92mhvDSbBo0/nUSX+66Q7iGsEPka6bTRboDT6XTxAYGicARQIKZAHyv9H1N31/6gZi2vA37JSgDkgLODmL3GHBIXJ/rDa470wn3NcDQMewYCYbfSqglLm0g3AoMcqXfMhII0kU6RE8X6Q6GgSc2YUgQMvg/GPqh0g9Hb3kd2wGLgTEgaDrIAg6ui+tzMWownE42YEjTMWo8eFAezjjVkF0eTTfMP1sjZwIE1Xh3iKwfnC78RuG6YbhDBcXOkDAQSAJKcB3wHyn9aOjHmnId2xoUA8UxOX66R8IBpMM16np7OnGdwX1yvwbD3zIewfjUUF1ejRvXAPADL79l2CFWQDCw2DJPIQNuGHAHw8ATbOu3GxgCgv3joZ+QfjL0UyWmvY6ebROWBMTuYTiGc0gGA2gzneyBkamEnwZfnkC4aQD4N43kT9IGA5QpgwF0/eBisrsDT2k6g13BbkAwHWQH/qeRjvEzSNM/izxfy8Y2kvfhGMiAcPxMMa470jUynWSdkWBkKuG3t25XQ3N5Nw0Gf+6Anwfw2uaiMoGwQwwgpJU7GAYEDHaDCYE0gi/9XOnnS78Q0ylvN4BRz7HsLBw/04udI+sNrnMFhh0jawzqiNvXkJwajQGRqL4ZKIqynjIYWBeTDDhPJQHgKeWJNQx2hgFDBTMhAICnlH5R+qXWW94GTUjCRewemVZ6SjEYXPceGLyV8Dn/BMSqaWD4B81U4R2IfLswEAy8gXDNkM5gRwAC5MD/culXQk9t8nK2Yx8D42MlHK49MqW4EHURunIMF5/c7x1qCE5t1RggiS9+VO2zhpAMBAO9AmLUDOEMPNl2A4PgoD9N2/2qpflfQ56O5U+TEhSOsQdHuoZrDTvGARjaj/vjreMExNk0DRh/F4Mvfx0IO4TrB9cO6Q5OEXYGgjkh0PSvh36j9PSQl3mbBGYFB+fjvE4prjW6YziVGIwncJ91y6d2Nk2Dxp/ieaIGjireDkENARAMOAM/0oW24WklMAQJdzAMT61gElhDQOCfUfpN6bei97TFNgbFgOAeiONzHtccuFOmE9cZBmPUGHU/vIresW711M6lMXAShRj265SxcYgCgoBkqhgpQkoYEoRnSs9qenabZxtkUNi3w9Fdw2C4CE3H8FsJhfQJiGvSNID80RSqdKp6OwRA8EQSABeTPLUDiHKHdAa7gIOPflv6nei7WG5QlnDUeQBwA0aB6lSSxSefu+9Ut3Zq16QxkBLVuovKdIgEYtQO6gECGNIVEoTflX6v9PtNXs42KAFJOJxWcA3XGk4n6RgDDF0XheUJiPPZNKD8rSbeRuwQriF4QgmI04VTBYEzDH76E4I/kJ4j/WH0FvOIbdh2BUcHg/PbMRIM0gjXfee6lVM7n01PG3/djcrdbxmuIToQThV2BsOQIPyR9MelP4lpxLoExHBwHI6XruF00sHwWwmf5O9St3Bq10YrMHi142kkAK4hjgGRMBiCPy39WfQW8wkKkBgOpxaOz3kmGHUdBuMpmueXfE5AXBdNA84fZuONJItKAuP6gYAROJ7uFQwE/s9Lf7Ej1hkSA8JxekpJMLL45E3jrnXJp3ZdNAZc4jU1i8pjQABDgvBXob8OedlfSgmH3cOuYTC6Y3A9XNcJiOujaeD5+558zNoDggASSDtDwvA3ob9tYpkh6XBkOjEYWXzyHeVudYmndn00AiDx7cJvGd0hCCRBJbh2BQL/d6W/D/1D9V5nOOwcgLFyDKcRXpdPQFwITYHgL8ny6ueisqcMAkpw7QoEHAD+MfTcNm9A0jkMhh3DNQZuwavy3euSTu1CaARERR4ftJw2VkDYGQzBc7XPP6n/51QtSzjYDzi6YwDGc+q8JyAuxKbA8EfJ+WjkOoK0keliuEOA8C9N/1pKOIDHrgFYgMFxOT7n4QPaPeoSTu1CbARI4nOz6wg7BIFNZwCCf5P+vYlliPXpGuzvVGK34DwnIC6GpkDxF+v5gMRTTSBdRPLUAwRuQOD/I/SfJc+znu2Aw/WGawyOy7eIExAXU1PA+N9Z8SFpuoSUDmEQ/qv03zFtOAwG+zmNAAWftO9Zpzq1i6kROImPSYbCdYOBAAT0P9L/Vm842IZ00qHgeCcgLuYmt+B/fvf0qg2AgkAnFMDwfyHDYTCGW9T+z+B4dehTu5hbgcFnaJ56Q5EO8bxQOgbgOIU88wTEJdYKDL46AkV3iedp/VXqaXYLQ8H2zzoBcYm2AoPP4ekUAwqJ5hTi9AEUzz4BcYk3BZn/uxE/OCPo6RZ2CKcO1vMzjXvVrqd2KTcCXQEn8ECAOhD8POMExOXUCLhkMOwa9KSMk0Ncrq1qDH4PgrcLf8M4vWVc7k0Q+C8D8ycJ+f+SXNx/uPTUzl+TO9ywJi/zdoMb/D+mFDuO5RtApAAAAABJRU5ErkJggg==);width:133px;height:97px;margin-top:-122px;margin-left:-66px;opacity:.8;z-index:2;transform:rotate(var(--rot));transform-origin:bottom center;transition:transform .2s}.gps-action{position:absolute;bottom:20px;left:20px;z-index:99999999;margin-bottom:-10px}#mapsMenu #gps-root .gps-action{position:initial}.gps-action svg{width:80%;fill:#aaa}#maps-menu .gps-action svg{fill:#373a3c}.gps-action .gps-pin{display:none}.gps-action .gps-share{display:none;position:relative}.gps-action .gps-config.hide{display:none}.gps-activated .gps-action .gps-pin{display:block}.gps-activated .gps-action .gps-connect{display:none}.gps-activated .gps-action .gps-config,.gps-activated .gps-action .gps-share{display:block}.gps-action .gps-pin.gps-pinned svg{fill:#ffc107}@media screen and (max-height: 500px) and (min-width: 400px){.gps-dialog{right:33vh!important;bottom:3vh!important}}@media screen and (max-width: 768px) and (orientation: portrait),only screen and (max-height: 500px) and (orientation: landscape){.gps-dialog{right:1em;bottom:27vh}}@media screen and (max-width: 1280px) and (min-width: 768px) and (min-height: 500px){.gps-dialog{bottom:22em!important}}.gps-dialog{position:fixed;right:-100%;opacity:0;bottom:18em;background:#fff;width:300px;height:130px;border-radius:6px;transition-property:opacity,right,bottom,width,height,border-radius,background-color;transition-duration:.5s;transition-timing-function:cubic-bezier(.7,1.35,.65,1)}.gps-dialog.show{right:1.5rem;opacity:1}.gps-dialog.closable .gps-dialog-buttons .gps-dialog-close{display:inline-block}.gps-dialog.minimized{right:1.5rem;bottom:20em;width:30px;height:30px;border-radius:50%}.gps-dialog.minimized.minimized.new{transition-property:opacity,right,bottom,width,height,border-radius;background-color:#c4b188}.gps-dialog.minimized .gps-dialog-header{border-bottom:none}.gps-dialog.minimized .gps-dialog-header .gps-dialog-title,.gps-dialog.minimized .gps-dialog-content-text{display:none}.gps-dialog.minimized .gps-dialog-buttons{margin:0 4px}.gps-dialog.minimized .gps-dialog-buttons .gps-dialog-close{display:none!important}.gps-dialog.minimized .gps-dialog-buttons .gps-dialog-minimize{margin:8px 3px}.gps-dialog .gps-dialog-header{padding:0 10px;border-bottom:solid 1px #BCBCBC}.gps-dialog .gps-dialog-header .gps-dialog-title{text-align:center;height:1rem}.gps-dialog .gps-dialog-content-text{height:100%!important;width:100%!important;margin:0;padding:15px 20px 35px;display:flex;align-items:center;justify-content:center}.gps-dialog .gps-dialog-buttons{display:flex;position:absolute;right:0;top:0;width:100%;height:30px;margin:3px 6px;justify-content:flex-end}.gps-dialog .gps-dialog-buttons .gps-dialog-minimize,.gps-dialog .gps-dialog-buttons .gps-dialog-close{display:inline-block;cursor:pointer;margin:3px;height:100%}.gps-dialog .gps-dialog-buttons .gps-dialog-minimize{top:18px;right:36px;font-size:16px;font-weight:600;align-self:flex-end;line-height:3}.gps-dialog .gps-dialog-buttons .gps-dialog-close{display:none;top:10px;right:10px;font-size:26px;line-height:1}.gps-dialog .gps-dialog-progress{width:88%;height:8px;margin:10px auto;border:1px solid #c5b189;border-radius:8px;display:block;position:absolute;bottom:0;left:6%;overflow:visible}.gps-dialog .gps-dialog-progress-in{height:95%;display:block;margin-left:.5px;background:#c4b188;width:.1%;transition:all .2s;border-radius:8px;box-shadow:0 0 20px 2px #c4b188}.gps-dialog .share-qr{height:100px;width:100px;box-sizing:content-box;padding-left:5px;padding-right:10px;float:left}.gps-dialog .share-qr img{height:100%;width:100%;mix-blend-mode:multiply}.gps-dialog .share-text{line-height:1.3;font-size:13px;padding-top:15px}.gps-dialog code{font-family:Consolas,monospace;color:#860000;font-weight:700;padding:2px 5px;background:#fbf9f4;border-radius:3px;margin-left:10px;-webkit-user-select:all;user-select:all}.maps-content-filter>div.current-map{animation:filter-btn-glow 2s ease infinite}.maps-menu>svg{width:24px}.gps-action-icon{width:24px;height:24px}.gps-config-modal{display:none;opacity:0;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006;font-family:nanumgothic;font-size:1em;font-weight:600}.gps-config-modal.show{display:block;opacity:1;transition:cubic-bezier(.175,.885,.32,1.275)}.gps-config-modal-content{background-color:#fff;margin:15% auto;padding:20px;border:1px solid #888;max-width:500px;width:50%;position:relative}.gps-config-modal-content-header{position:relative}.gps-config-modal-content-body{margin:25px 0;display:grid;gap:10px;grid-auto-rows:minmax(2em,auto)}.gps-config-item{display:grid;grid-template-columns:40% 60%;align-items:center}.gps-config-modal-title{margin:0}.gps-config-close{position:absolute;color:#aaa;float:right;font-size:28px;font-weight:700;right:.2rem;top:-7px}.gps-config-close:hover,.gps-config-close:focus{color:#000;text-decoration:none;cursor:pointer}.gps-config-label{grid-column:1;place-self:center stretch}.gps-config-value{grid-column:2/3;place-self:center stretch}.gps-config-switch{position:relative;display:inline-block;width:2.75em;height:1.5em}.gps-config-switch input{opacity:0;width:0;height:0}.gps-config-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;border-radius:50px;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.gps-config-slider:before{position:absolute;content:"";height:1.25em;width:1.25em;left:.125em;bottom:.125em;border-radius:50px;background-color:#fff;-webkit-transition:.4s;transition:.4s;box-shadow:0 3px 2px #0003}input:checked+.gps-config-slider{background-color:#2196f3}input:focus+.gps-config-slider{box-shadow:0 0 1px #2196f3}input:checked+.gps-config-slider:before{-webkit-transform:translateX(1.25em);-ms-transform:translateX(1.25em);transform:translate(1.25em)}.gps-config-time-input{width:50%;height:2em;margin:10px 0;box-sizing:border-box;border:2px solid #ccc;border-radius:4px;background-color:#fff;font-size:16px;resize:none;position:relative}.gps-config-time-input+.gps-config-time-input-label.ms:after{content:"ms";display:inline-block;right:.5em;top:.5em;font-size:1em;color:#777}.gps-config-modal-content-footer{text-align:end}.gps-config-btn{background-color:#2196f3;color:#fff;margin:0 .25em;padding:12px 20px;border:none;border-radius:4px;cursor:pointer}.gps-config-btn:hover{background-color:#2196f3;position:relative}.gps-config-btn.cancel{background-color:#ccc;color:#000}@keyframes pulse-blue{0%{margin:-2px;height:4px;width:4px;transform:scale(.95);background:#34ace0b3;box-shadow:0 0 #34ace0b3}70%{margin:-20px;height:40px;width:40px;transform:scale(1);background:#34ace000;box-shadow:0 0 16px 64px #34ace000}to{margin:-20px;height:40px;width:40px;transform:scale(.95);background:#34ace000;box-shadow:0 0 #34ace000}}@keyframes filter-btn-glow{0%{box-shadow:0 5px 10px 5px #00000012,0 0 #34ace0,inset 0 0 #34ace0}to{box-shadow:0 5px 10px 5px #00000012,0 0 10px 8px transparent,inset 0 0 5px 4px transparent}} ');

(function () {
	'use strict';

	var e,t,i=Object.defineProperty,s=e=>{throw TypeError(e)},n=(e,t,s)=>((e,t,s)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),o=(e,t,i)=>t.has(e)||s("Cannot "+i),a=(e,t,i)=>(o(e,t,"read from private field"),i?i.call(e):t.get(e)),c=(e,t,i)=>t.has(e)?s("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),r=(e,t,i,s)=>(o(e,t,"write to private field"),t.set(e,i),i),l=(()=>"undefined"!=typeof GM_getValue?GM_getValue:void 0)(),h=(()=>"undefined"!=typeof GM_setValue?GM_setValue:void 0)(),d=(()=>"undefined"!=typeof unsafeWindow?unsafeWindow:void 0)();class g{constructor(){n(this,"actionMenu"),n(this,"actionPin"),n(this,"actionConnect"),n(this,"actionConfig"),n(this,"actionShare"),this.actionMenu=document.createElement("div"),this.actionMenu.className="gps-action",this.actionPin=document.createElement("div"),this.actionPin.className="maps-menu gps-pin",this.actionPin.title="내 위치로 이동",this.actionPin.innerHTML='<svg viewBox="0 0 1024 1024"><path d="M176 478.208l275.328 91.733333c1.28 0.426667 2.261333 1.408 2.688 2.688l91.733333 275.328a4.266667 4.266667 0 0 0 7.978667 0.341334l279.381333-651.861334a4.266667 4.266667 0 0 0-5.589333-5.589333L175.658667 470.186667a4.266667 4.266667 0 0 0 0.341333 7.978666z"></path></svg>\n        <p>따라가기</p>',this.actionMenu.append(this.actionPin),this.actionConnect=document.createElement("div"),this.actionConnect.className="maps-menu gps-connect",this.actionConnect.title="플러그인 연결",this.actionConnect.innerHTML="<img src=data:image/svg+xml,%3csvg%20fill='%23000000'%20height='800px'%20width='800px'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20490%20490'%20xml:space='preserve'%3e%3cg%3e%3cpath%20d='M245,490c135.31,0,245-109.69,245-245C490,109.69,380.31,0,245,0S0,109.69,0,245C0,380.31,109.69,490,245,490z%20M245,30.625%20c118.206,0,214.375,96.168,214.375,214.375c0,118.206-96.169,214.375-214.375,214.375c-118.207,0-214.375-96.169-214.375-214.375%20C30.625,126.793,126.793,30.625,245,30.625z'/%3e%3cpath%20d='M388.428,371.511L245,72.551l-143.428,298.96L245,279.522L388.428,371.511z%20M175.848,287.49L245,143.352l69.152,144.138%20l-52.618-33.747L245,243.139l-16.534,10.604L175.848,287.49z'/%3e%3c/g%3e%3c/svg%3e alt=\"Load\" class=\"gps-action-icon\" /><p>실시간 연결</p>",this.actionMenu.append(this.actionConnect),this.actionConfig=document.createElement("div"),this.actionConfig.className="maps-menu gps-config hide",this.actionConfig.title="설정",this.actionConfig.innerHTML="<img src=data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20width='122.88px'%20height='95.089px'%20viewBox='0%200%20122.88%2095.089'%20enable-background='new%200%200%20122.88%2095.089'%20xml:space='preserve'%3e%3cg%3e%3cpath%20d='M66.605,9.676c-0.791-0.791-1.718-1.181-2.792-1.181c-1.073,0-2.013,0.39-2.791,1.181l-4.255,4.241%20c-1.141-0.738-2.348-1.383-3.61-1.96c-1.261-0.577-2.55-1.072-3.852-1.502V3.931c0-1.1-0.375-2.026-1.141-2.791%20C47.401,0.375,46.475,0,45.374,0h-8.187c-1.047,0-1.958,0.375-2.75,1.14c-0.778,0.765-1.168,1.691-1.168,2.791v5.973%20c-1.368,0.321-2.697,0.724-3.973,1.221c-1.287,0.496-2.508,1.061-3.663,1.691l-4.711-4.644c-0.738-0.778-1.637-1.181-2.724-1.181%20c-1.075,0-2,0.403-2.792,1.181l-5.73,5.745c-0.791,0.791-1.181,1.718-1.181,2.79c0,1.074,0.39,2.014,1.181,2.792l4.242,4.255%20c-0.738,1.14-1.382,2.348-1.959,3.608c-0.578,1.262-1.073,2.552-1.504,3.853H3.933c-1.102,0-2.028,0.375-2.792,1.14%20C0.376,33.121,0,34.047,0,35.148v8.187c0,1.045,0.376,1.959,1.14,2.751c0.764,0.777,1.691,1.167,2.792,1.167h5.971%20c0.322,1.367,0.724,2.696,1.222,3.971c0.498,1.289,1.061,2.537,1.691,3.744l-4.644,4.63c-0.779,0.739-1.181,1.638-1.181,2.726%20c0,1.073,0.402,2,1.181,2.792l5.745,5.811c0.791,0.738,1.717,1.102,2.792,1.102c1.072,0,2.011-0.363,2.791-1.102l4.254-4.321%20c1.14,0.737,2.349,1.381,3.61,1.96c1.262,0.575,2.55,1.073,3.852,1.502v6.523c0,1.1,0.376,2.025,1.14,2.789%20c0.765,0.767,1.692,1.143,2.792,1.143h8.186c1.047,0,1.959-0.376,2.751-1.143c0.777-0.764,1.167-1.689,1.167-2.789v-5.973%20c1.369-0.321,2.697-0.724,3.972-1.222c1.289-0.496,2.538-1.061,3.744-1.691l4.63,4.645c0.739,0.778,1.65,1.181,2.753,1.181%20c1.112,0,2.025-0.402,2.765-1.181l5.811-5.744c0.738-0.793,1.102-1.719,1.102-2.792s-0.363-2.013-1.102-2.791l-4.321-4.255%20c0.738-1.141,1.382-2.348,1.96-3.609c0.575-1.261,1.072-2.551,1.502-3.852h6.523c1.1,0,2.025-0.378,2.789-1.141%20c0.766-0.766,1.142-1.691,1.142-2.792v-8.186c0-1.047-0.376-1.958-1.142-2.752c-0.764-0.778-1.689-1.167-2.789-1.167h-5.973%20c-0.322-1.315-0.725-2.63-1.222-3.931c-0.496-1.316-1.061-2.55-1.691-3.706l4.645-4.709c0.778-0.738,1.181-1.638,1.181-2.724%20c0-1.075-0.402-2-1.181-2.792L66.605,9.676L66.605,9.676z%20M111.918,53.649c-0.506-0.355-1.044-0.479-1.627-0.376%20c-0.583,0.101-1.057,0.401-1.401,0.904l-1.908,2.702c-0.688-0.292-1.402-0.526-2.144-0.721c-0.737-0.194-1.484-0.343-2.231-0.451%20l-0.616-3.538c-0.105-0.596-0.395-1.063-0.884-1.406c-0.486-0.343-1.024-0.459-1.621-0.354l-4.441,0.774%20c-0.566,0.099-1.025,0.39-1.383,0.879c-0.35,0.487-0.475,1.027-0.369,1.625l0.564,3.238c-0.713,0.303-1.395,0.648-2.037,1.038%20c-0.654,0.392-1.263,0.812-1.828,1.264l-2.995-2.073c-0.476-0.352-0.999-0.484-1.59-0.383c-0.583,0.103-1.046,0.407-1.402,0.904%20l-2.564,3.659c-0.354,0.504-0.479,1.044-0.377,1.623c0.102,0.585,0.402,1.057,0.905,1.404l2.703,1.907%20c-0.292,0.687-0.527,1.402-0.721,2.144c-0.195,0.738-0.343,1.484-0.452,2.231l-3.538,0.616c-0.596,0.104-1.063,0.396-1.406,0.884%20c-0.344,0.486-0.458,1.025-0.354,1.621l0.773,4.441c0.099,0.566,0.388,1.026,0.88,1.383c0.487,0.35,1.027,0.474,1.624,0.369%20l3.239-0.564c0.304,0.713,0.648,1.394,1.038,2.039c0.392,0.652,0.815,1.274,1.272,1.869l-2.081,2.952%20c-0.353,0.475-0.485,0.999-0.383,1.59c0.102,0.583,0.406,1.047,0.904,1.402l3.665,2.607c0.499,0.325,1.036,0.436,1.618,0.334%20c0.583-0.101,1.059-0.389,1.41-0.862l1.899-2.746c0.688,0.293,1.403,0.528,2.144,0.721c0.738,0.194,1.484,0.343,2.23,0.45%20l0.618,3.54c0.104,0.597,0.396,1.063,0.883,1.404c0.486,0.344,1.025,0.46,1.621,0.356l4.439-0.775%20c0.569-0.1,1.028-0.389,1.386-0.879c0.349-0.488,0.474-1.025,0.368-1.624l-0.565-3.241c0.713-0.303,1.396-0.646,2.04-1.037%20c0.651-0.393,1.274-0.814,1.87-1.27l2.951,2.081c0.475,0.352,1.008,0.483,1.604,0.378c0.604-0.104,1.061-0.409,1.388-0.901%20l2.609-3.665c0.324-0.5,0.435-1.036,0.332-1.618c-0.101-0.583-0.387-1.059-0.86-1.41l-2.748-1.899%20c0.294-0.688,0.528-1.403,0.722-2.144c0.194-0.738,0.342-1.484,0.452-2.232l3.537-0.616c0.597-0.104,1.063-0.394,1.405-0.883%20c0.344-0.488,0.459-1.024,0.355-1.621l-0.775-4.441c-0.099-0.567-0.389-1.025-0.879-1.384c-0.487-0.351-1.027-0.473-1.624-0.369%20l-3.239,0.565c-0.299-0.684-0.642-1.358-1.035-2.017c-0.395-0.667-0.816-1.283-1.267-1.85l2.074-2.995%20c0.353-0.475,0.484-0.998,0.38-1.59c-0.101-0.583-0.405-1.045-0.904-1.401L111.918,53.649L111.918,53.649z%20M99.16,64.929%20c1.071-0.188,2.118-0.162,3.147,0.075c1.025,0.246,1.953,0.657,2.777,1.231c0.825,0.582,1.523,1.316,2.101,2.198%20c0.573,0.889,0.95,1.865,1.139,2.936c0.187,1.072,0.16,2.119-0.076,3.15c-0.246,1.023-0.655,1.949-1.233,2.776%20c-0.582,0.823-1.314,1.522-2.196,2.1c-0.889,0.573-1.865,0.951-2.937,1.139c-1.07,0.186-2.117,0.159-3.148-0.077%20c-1.025-0.246-1.95-0.655-2.777-1.232c-0.822-0.582-1.522-1.314-2.1-2.196c-0.572-0.889-0.952-1.866-1.138-2.937%20c-0.188-1.07-0.162-2.117,0.075-3.148c0.246-1.025,0.657-1.951,1.231-2.778c0.583-0.821,1.316-1.521,2.198-2.099%20C97.114,65.494,98.09,65.116,99.16,64.929L99.16,64.929z%20M40.262,24.224c2.201,0,4.28,0.417,6.252,1.248%20c1.961,0.846,3.666,1.986,5.115,3.421c1.435,1.449,2.575,3.156,3.421,5.113c0.833,1.973,1.248,4.054,1.248,6.254%20c0,2.201-0.415,4.282-1.248,6.254c-0.846,1.959-1.986,3.666-3.421,5.115c-1.449,1.436-3.154,2.575-5.115,3.421%20c-1.972,0.833-4.051,1.248-6.252,1.248s-4.282-0.415-6.255-1.248c-1.958-0.846-3.664-1.985-5.112-3.421%20c-1.437-1.449-2.577-3.155-3.423-5.115c-0.831-1.972-1.248-4.053-1.248-6.254c0-2.2,0.417-4.281,1.248-6.254%20c0.846-1.958,1.986-3.664,3.423-5.113c1.448-1.435,3.154-2.576,5.112-3.421C35.979,24.641,38.061,24.224,40.262,24.224%20L40.262,24.224z'/%3e%3c/g%3e%3c/svg%3e alt=\"Load\" class=\"gps-action-icon\" /><p>설정</p>",this.actionMenu.append(this.actionConfig),this.actionShare=document.createElement("div"),this.actionShare.className="maps-menu gps-share",this.actionShare.style.display="none",this.actionShare.title="멀티스크린 공유",this.actionShare.innerHTML="<img src=data:image/svg+xml,%3csvg%20viewBox='0%200%201024%201024'%3e%3cpath%20d='M262.4%20262.4l115.2%200%200%20115.2-115.2%200%200-115.2Z'%3e%3c/path%3e%3cpath%20d='M262.4%20646.4l115.2%200%200%20115.2-115.2%200%200-115.2Z'%3e%3c/path%3e%3cpath%20d='M646.4%20262.4l115.2%200%200%20115.2-115.2%200%200-115.2Z'%3e%3c/path%3e%3cpath%20d='M806.4%20806.4l-115.2%200%200%2057.6%20115.2%200c32%200%2057.6-25.6%2057.6-57.6l0-57.6-57.6%200L806.4%20806.4z'%3e%3c/path%3e%3cpath%20d='M160%20217.6l0%20262.4%20320%200%200-320L217.6%20160C185.6%20160%20160%20185.6%20160%20217.6zM422.4%20422.4%20217.6%20422.4%20217.6%20217.6l204.8%200L422.4%20422.4z'%20p-id='2905'%3e%3c/path%3e%3cpath%20d='M160%20806.4c0%2032%2025.6%2057.6%2057.6%2057.6l262.4%200%200-320-320%200L160%20806.4zM217.6%20601.6l204.8%200%200%20204.8L217.6%20806.4%20217.6%20601.6z'%20p-id='2906'%3e%3c/path%3e%3cpath%20d='M544%20544l204.8%200%200%2057.6-204.8%200%200-57.6Z'%20p-id='2907'%3e%3c/path%3e%3cpath%20d='M691.2%20627.2%20627.2%20627.2%20627.2%20691.2%20691.2%20691.2%20691.2%20748.8%20748.8%20748.8%20748.8%20691.2%20864%20691.2%20864%20627.2%20748.8%20627.2Z'%20p-id='2908'%3e%3c/path%3e%3cpath%20d='M544%20748.8l57.6%200%200%20115.2-57.6%200%200-115.2Z'%20p-id='2909'%3e%3c/path%3e%3cpath%20d='M627.2%20748.8l57.6%200%200%2057.6-57.6%200%200-57.6Z'%20p-id='2910'%3e%3c/path%3e%3cpath%20d='M544%20627.2l57.6%200%200%2057.6-57.6%200%200-57.6Z'%20p-id='2911'%3e%3c/path%3e%3cpath%20d='M806.4%20544l57.6%200%200%2057.6-57.6%200%200-57.6Z'%20p-id='2912'%3e%3c/path%3e%3cpath%20d='M806.4%20160%20544%20160l0%20320%20320%200L864%20217.6C864%20185.6%20838.4%20160%20806.4%20160zM806.4%20422.4%20601.6%20422.4%20601.6%20217.6l204.8%200L806.4%20422.4z'%3e%3c/path%3e%3c/svg%3e alt=\"QR Code\" class=\"gps-action-icon\" /><p>멀티스크린</p>";const e=document.createElement("div");e.className="gps-share-dot",e.innerText="0",this.actionShare.append(e),this.actionMenu.append(this.actionShare);}}function p(){const e=navigator.userAgent;return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}function u(e){return new Promise((t=>setTimeout(t,e)))}async function m(e,t){const{timeout:i}=t||8e3,s=new AbortController,n=setTimeout((()=>s.abort()),i),o=await fetch(e,{...t,signal:s.signal});return clearTimeout(n),o}async function M(e){const t=(new TextEncoder).encode(e),i=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(i)).reduce(((e,t)=>e+t))}class v{constructor(){n(this,"dialog"),n(this,"dialogTitle"),n(this,"dialogContentText"),n(this,"dialogMinimize"),n(this,"dialogClose"),n(this,"dialogContentProgress"),n(this,"dialogContentProgressIn"),n(this,"_isShowing",!1),n(this,"_isMinimized",!1),n(this,"_isProgressing",!1),n(this,"_contentMessageHashNumber",0),this.dialog=document.createElement("div"),this.dialog.className="gps-dialog";const e=document.createElement("div");e.className="gps-dialog-header",this.dialog.appendChild(e);const t=document.createElement("div");t.className="gps-dialog-buttons",this.dialog.appendChild(t),this.dialogTitle=document.createElement("h3"),this.dialogTitle.className="gps-dialog-title",e.append(this.dialogTitle),this.dialogMinimize=document.createElement("span"),this.dialogMinimize.className="gps-dialog-minimize",this.dialogMinimize.innerHTML="&#8213;",this.dialogMinimize.addEventListener("click",(e=>this.minimizeDialog(e))),t.append(this.dialogMinimize),this.dialogClose=document.createElement("span"),this.dialogClose.className="gps-dialog-close",this.dialogClose.innerHTML="&#215;",this.dialogClose.addEventListener("click",(e=>this.closeDialog(e,""))),t.append(this.dialogClose);const i=document.createElement("div");i.className="gps-dialog-content",this.dialog.append(i),this.dialogContentText=document.createElement("div"),this.dialogContentText.className="gps-dialog-content-text",i.append(this.dialogContentText),this.dialogContentProgress=document.createElement("div"),this.dialogContentProgress.className="gps-dialog-progress",i.append(this.dialogContentProgress),this.dialogContentProgressIn=document.createElement("div"),this.dialogContentProgressIn.className="gps-dialog-progress-in",this.dialogContentProgress.append(this.dialogContentProgressIn);}alertDialog(e,t,i=0,s=!1){this.dialogTitle.innerText=e,this.dialogContentText.innerText=t,this.dialog.classList.add("show"),s?this.dialog.classList.add("closable"):this.dialog.classList.remove("closable"),this._isShowing=!0,this._isMinimized&&(this.dialog.classList.add("new"),setTimeout((()=>{this.dialog.classList.remove("new");}),10)),M(t).then((e=>{this._contentMessageHashNumber=e;})),i>0&&setTimeout((()=>{this.closeDialog(null,t);}),i);}closeDialog(e,t=""){null==e?M(t).then((e=>{this._contentMessageHashNumber==e&&(this.dialog.classList.remove("show"),this._isShowing=!1);})):(this.dialog.classList.remove("show"),this._isShowing=!1);}minimizeDialog(e){this._isMinimized?(this.dialog.classList.remove("minimized"),this.dialogMinimize.innerHTML="&#8213;",this._isMinimized=!1):(this.dialog.classList.add("minimized"),this.dialogMinimize.innerHTML="&#9635;",this._isMinimized=!0);}showProgress(){this.dialogContentProgress.style.display="block",this.dialogContentProgressIn.style.width="0%",this._isProgressing=!0;}changeProgress(e){this._isProgressing&&(this.dialogContentProgressIn.style.width=`${e}%`);}hideProgress(){this.dialogContentProgress.style.display="none",this.dialogContentProgressIn.style.width="0%",this._isProgressing=!1;}get isShowing(){return this._isShowing}get isMinimized(){return this._isMinimized}get isProgressing(){return this._isProgressing}}class b{constructor(){n(this,"userMarker"),n(this,"userMarkerIcon"),this.userMarker=document.createElement("div"),this.userMarker.classList.add("gps-user-marker"),this.userMarker.style.transformOrigin="center",this.userMarkerIcon=document.createElement("div"),this.userMarkerIcon.classList.add("gps-user-position"),this.userMarker.appendChild(this.userMarkerIcon);}}const f=class e{constructor(){n(this,"socket"),n(this,"onSocketConnectPost",(()=>{})),n(this,"onTrackEvent",(()=>{})),n(this,"onGetConfig",(()=>{})),n(this,"onAppUpdateProgress",(()=>{})),n(this,"onAppUpdateDone",(()=>{})),n(this,"onLibUpdateProgress",(()=>{})),n(this,"onLibUpdateDone",(()=>{})),n(this,"onLibInit",(()=>{})),n(this,"onSocketClose",(()=>{})),this.socket=null;}static get instance(){return e._instance||(e._instance=new e),e._instance}async getSocket(){let e=0;for(;e++<10&&(!this.socket||this.socket.readyState!==WebSocket.OPEN&&this.socket.readyState!==WebSocket.CONNECTING);){let e;try{if(e=await m("http://localhost:32332/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:p?2:1}),timeout:8e3}),e.ok){const t=await e.json();return this.socket=new WebSocket(t.url),this.socket.addEventListener("open",(e=>this.onWsOpen(e))),this.socket.addEventListener("message",(e=>this.onWsMessage(e))),this.socket.addEventListener("error",(e=>this.onWsError(e))),this.socket.addEventListener("close",(e=>this.onWsClose(e))),this.socket}await u(3e3);continue}catch(t){await u(3e3);continue}}return this.socket}closeSocket(){this.socket&&(this.socket.close(),this.socket=null);}isSocketOpen(){return this.socket instanceof WebSocket&&(this.socket.readyState===WebSocket.CONNECTING||this.socket.readyState===WebSocket.OPEN)}addSocketEventListener(e,t){this.socket instanceof WebSocket&&this.socket.addEventListener(e,t);}onWsOpen(e){(null==e?void 0:e.currentTarget)instanceof WebSocket&&e.currentTarget.send(JSON.stringify({event:"checkAppUpdate"})),this.onSocketConnectPost(e);}onWsMessage(e){const t=JSON.parse(e.data);l("debug")&&console.debug(t.data),"track"==(null==t?void 0:t.event)?(t.data.err=""!=t.data.err?JSON.parse(t.data.err):null,t.data=t.data,this.onTrackEvent(e,t.data)):"update"==(null==t?void 0:t.event)?this.onUpdateEvent(e,t.data):"config"==(null==t?void 0:t.event)&&this.onConfigEvent(e,t.data);}onWsError(e){console.debug("============= WebSocket Error ============="),console.debug(`error: ${e}`),console.debug("===========================================");}onWsClose(e){console.debug("============= WebSocket Closed ============="),console.debug(`code: ${e.code}`),console.debug(`reason: ${e.reason}`),console.debug("============================================"),this.closeSocket();}onConfigEvent(e,t){this.onGetConfig(e,t),t.changed||(null==e?void 0:e.currentTarget)instanceof WebSocket&&(this.onLibInit(e,t),e.currentTarget.send(JSON.stringify({event:"init"})));}onUpdateEvent(e,t){t.done?"app"==t.targetType?((null==e?void 0:e.currentTarget)instanceof WebSocket&&e.currentTarget.send(JSON.stringify({event:"checkLibUpdate"})),this.onAppUpdateDone(e,t)):"cvat"==t.targetType&&((null==e?void 0:e.currentTarget)instanceof WebSocket&&e.currentTarget.send(JSON.stringify({event:"getConfig"})),this.onLibUpdateDone(e,t)):"app"==t.targetType?this.onAppUpdateProgress(e,t):"cvat"==t.targetType&&this.onLibUpdateProgress(e,t);}sendConfig(e){this.socket&&this.socket.send(JSON.stringify({event:"setConfig",data:e}));}};n(f,"_instance");let k=f;const w=class e{constructor(e){n(this,"config"),n(this,"configItems",[]),n(this,"modal"),n(this,"btnSave"),n(this,"btnCancel"),n(this,"onSaveConfig",(()=>{})),this.config=e;for(const n in e){let t="";"autoAppUpdate"===n?t="앱 자동 업데이트":"autoLibUpdate"===n?t="라이브러리 자동 업데이트":"captureInterval"===n?t="화면 캡쳐 간격":"captureDelayOnError"===n?t="캡쳐 에러 시 대기 시간":"useBitBltCaptureMode"===n&&(t="비트블럭 캡쳐 모드 사용"),this.configItems.push({configKey:n,label:t,defaultValue:e[n],type:typeof e[n]});}this.modal=document.createElement("div"),this.modal.className="gps-config-modal";const t=document.createElement("div");t.className="gps-config-modal-content",this.modal.appendChild(t);const i=document.createElement("div");i.className="gps-config-modal-content-header",t.appendChild(i);const s=document.createElement("h2");s.className="gps-config-modal-title",s.innerText="설정",i.appendChild(s);const o=document.createElement("div");o.className="gps-config-close",o.innerHTML="&times;",i.appendChild(o);const a=document.createElement("div");a.className="gps-config-modal-content-body",t.appendChild(a),this.configItems.forEach(((e,t)=>{const i=document.createElement("div");i.className="gps-config-item",a.appendChild(i);const s=document.createElement("label");if(s.className="gps-config-item-label",s.innerText=e.label,s.htmlFor=`gps-config-${t}`,i.appendChild(s),"boolean"===e.type){const s=document.createElement("label");s.className="gps-config-value gps-config-switch",i.appendChild(s);const n=document.createElement("input");n.id=`gps-config-${t}`,n.type="checkbox",n.checked=e.defaultValue,n.addEventListener("change",(t=>{const i=t.target;this.config[e.configKey]=i.checked;})),s.appendChild(n);const o=document.createElement("span");o.className="gps-config-slider",s.appendChild(o);}else if("number"===e.type){const s=document.createElement("div");s.className="gps-config-value",i.appendChild(s);const n=document.createElement("input");n.className="gps-config-item-input",n.id=`gps-config-${t}`,n.type=e.type,n.min="100",n.max="60000",n.value=e.defaultValue,n.maxLength=5,n.addEventListener("change",(t=>{const i=t.target;this.config[e.configKey]=parseInt(i.value);})),s.appendChild(n);}}));const c=document.createElement("div");c.className="gps-config-modal-content-footer",t.appendChild(c),this.btnSave=document.createElement("button"),this.btnSave.className="gps-config-btn save",this.btnSave.innerText="저장",c.appendChild(this.btnSave),this.btnCancel=document.createElement("button"),this.btnCancel.className="gps-config-btn cancel",this.btnCancel.innerText="취소",c.appendChild(this.btnCancel),document.body.appendChild(this.modal),o.addEventListener("click",(()=>{this.hideModal();})),this.btnCancel.addEventListener("click",(()=>{this.hideModal();})),this.btnSave.addEventListener("click",(()=>{this.hideModal(),this.onSaveConfig(this.config);}));}static getInstance(t){return e._instance||(e._instance=new e(t)),e._instance}showModal(e){this.modal.classList.add("show");}hideModal(){this.modal.classList.remove("show");}};n(w,"_instance");let C=w;class P{constructor(e){n(this,"_config"),n(this,"modal"),n(this,"onConfigChanged",(()=>{})),this._config=e,this.modal=C.getInstance(this._config),this.modal.onSaveConfig=e=>{this.config=e;};}set config(e){this._config=e,this.onConfigChanged(this._config);}get config(){return this._config}}const L=class t{constructor(){n(this,"root"),n(this,"dialog"),n(this,"actionMenu"),n(this,"userMarker"),n(this,"config"),n(this,"siteHost"),n(this,"isPinned"),n(this,"currentMap"),n(this,"ws"),n(this,"mapElement",null),n(this,"isActive",!1),n(this,"_loadAbortController",new AbortController),n(this,"_loadAbortSignal",this._loadAbortController.signal),n(this,"_activeAbortController",new AbortController),n(this,"_activeAbortSignal",this._activeAbortController.signal),this.root=document.createElement("div"),this.root.id="gps-root",this.siteHost=location.host,this.root.classList.add(this.siteHost.replace(/\./g,"-")),this.actionMenu=new g,this.root.appendChild(this.actionMenu.actionMenu),this.dialog=new v,this.root.appendChild(this.dialog.dialog),this.userMarker=new b,this.ws=k.instance,this.ws.onGetConfig=(e,t)=>this.onGetConfig(e,t),this.ws.onAppUpdateProgress=(e,t)=>this.onAppUpdateProgress(e,t),this.ws.onAppUpdateDone=(e,t)=>this.onAppUpdateDone(e,t),this.ws.onLibUpdateProgress=(e,t)=>this.onLibUpdateProgress(e,t),this.ws.onLibUpdateDone=(e,t)=>this.onLibUpdateDone(e,t),this.ws.addSocketEventListener("close",(e=>this.onSocketClose(e))),this.actionMenu.actionConnect.addEventListener("click",(e=>this.onClickLoadPluginBtn(e,!1)),{signal:this._loadAbortSignal}),this.actionMenu.actionConnect.addEventListener("contextmenu",(e=>this.onClickLoadPluginBtn(e,!0)),{signal:this._loadAbortSignal}),this.actionMenu.actionPin.addEventListener("click",(e=>this.onClickPinBtn(e))),this.actionMenu.actionPin.addEventListener("contextmenu",(e=>this.onRightClickPinBtn(e))),this.isPinned=!0,this.isPinned&&(this.userMarker.userMarker.classList.add("gps-pinned"),this.actionMenu.actionPin.classList.add("gps-pinned")),this.currentMap=0;}static get instance(){return a(t,e)||r(t,e,new t),a(t,e)}onClickLoadPluginBtn(e,t){this._loadAbortController.abort(),e.preventDefault(),e.stopPropagation(),this.loadPlugin(t);}loadPlugin(e){!async function(e=!1){const t=new Array;e&&t.push("debug"),t.push("launch");let i=`genshin-paisitioning://${t.join("/")}`;try{const e=document.createElement("a");e.href=i,e.click();}catch(s){console.error(s);}}(e),h("debug",e),this.ws.getSocket().then((e=>{null==e&&(this.dialog.alertDialog("GPS","GPA에 연결할 수 없습니다. 앱이 켜져있는지 확인해주세요.",1e4),this.onAppDeactivate());}));}onClickPinBtn(e){e.preventDefault(),e.stopPropagation(),this.togglePin();}onRightClickPinBtn(e){e.preventDefault(),e.stopPropagation();}onStartAppUpdate(e,t){this.dialog.alertDialog("GPS",`GPA ${t.targetVersion} 버전 업데이트 중...`,0,!1),this.dialog.showProgress();}onAppUpdateProgress(e,t){this.dialog.isProgressing||this.onStartAppUpdate(e,t),this.dialog.changeProgress(t.percent);}onAppUpdateDone(e,t){this.dialog.isShowing&&this.dialog.isProgressing&&(this.dialog.closeDialog(null,`GPA ${t.targetVersion} 버전 업데이트 중...`),this.dialog.hideProgress()),t.updated&&(this.dialog.alertDialog("GPS","GPA가 업데이트 되었습니다. 다시 시작합니다. 진행되지 않으면, 페이지를 새로고침 해주세요."),this.ws.closeSocket(),this.onAppDeactivate(),this.loadPlugin(l("debug",!1)));}onStartLibUpdate(e,t){this.dialog.alertDialog("GPS",`라이브러리 ${t.targetVersion} 버전 업데이트 중...`,0,!1),this.dialog.showProgress();}onLibUpdateProgress(e,t){console.debug("onLibUpdateProgress"),this.dialog.isProgressing||this.onStartLibUpdate(e,t),this.dialog.changeProgress(t.percent);}onLibUpdateDone(e,t){console.debug("onLibUpdateDone"),this.dialog.isShowing&&this.dialog.isProgressing&&(this.dialog.closeDialog(null,`라이브러리 ${t.targetVersion} 버전 업데이트 중...`),this.dialog.hideProgress());}onSocketClose(e){this.onAppDeactivate();}onGetConfig(e,t){this.config=new P({autoAppUpdate:l("autoAppUpdate",!0),autoLibUpdate:l("autoLibUpdate",!0),captureInterval:t.captureInterval,captureDelayOnError:t.captureDelayOnError,useBitBltCaptureMode:t.useBitBltCaptureMode}),this.onAppActivate(t),this.config.onConfigChanged=e=>this.onConfigChanged(e);}onAppActivate(e){this.isActive=!0,this.dialog.hideProgress(),document.body.classList.add("gps-activated"),this.actionMenu.actionMenu.classList.add("gps-active"),this.actionMenu.actionConnect.classList.add("gps-active"),this.actionMenu.actionConfig.classList.add("gps-active"),this._loadAbortController.abort(),this._activeAbortController=new AbortController,this._activeAbortSignal=this._activeAbortController.signal,this.actionMenu.actionConfig.addEventListener("click",(e=>this.config.modal.showModal(e)),{signal:this._activeAbortSignal});}onAppDeactivate(){this.isActive=!1,this._loadAbortController=new AbortController,this._loadAbortSignal=this._loadAbortController.signal,this.actionMenu.actionConnect.addEventListener("click",(e=>this.onClickLoadPluginBtn(e,!1)),{signal:this._loadAbortSignal}),this.actionMenu.actionConnect.addEventListener("contextmenu",(e=>this.onClickLoadPluginBtn(e,!0)),{signal:this._loadAbortSignal}),document.body.classList.remove("gps-activated"),this.actionMenu.actionMenu.classList.remove("gps-active"),this.actionMenu.actionConnect.classList.remove("gps-active"),this.actionMenu.actionConfig.classList.remove("gps-active"),this._activeAbortController.abort();}onConfigChanged(e){h("autoAppUpdate",e.autoAppUpdate),h("autoLibUpdate",e.autoLibUpdate),this.ws.sendConfig(e);}setFocusScroll(e,t){}appendUserMarker(e){e.appendChild(this.userMarker.userMarker);}setPinned(e){if(this.isPinned=e,this.isPinned){if(this.actionMenu.actionPin.classList.add("gps-pinned"),this.userMarker.userMarker){let e,t,i,s,n,o;this.userMarker.userMarker.classList.add("gps-pinned"),i="translate",s=this.userMarker.userMarker.style.transform.indexOf(i)+i.length+1,n=this.userMarker.userMarker.style.transform.indexOf(")",s),o=this.userMarker.userMarker.style.transform.substring(s,n),o&&([e,t]=o.split(", "),e=parseInt(e),t=parseInt(t),this.setFocusScroll(e,t));}}else this.actionMenu.actionPin.classList.remove("gps-pinned"),this.userMarker.userMarker&&this.userMarker.userMarker.classList.remove("gps-pinned");}togglePin(){this.setPinned(!this.isPinned);}drawUserIcon(){const e=document.createElement("div");e.className="gps-user-icon",this.root.appendChild(e);}};c(L,e=new WeakMap);let S=L;const y=class e extends S{constructor(){super(),n(this,"objectPanelMenu",null),n(this,"objectTargetFilterBtn",null),n(this,"mapInfo"),n(this,"mcEnsure"),n(this,"focusPos",[0,0]),n(this,"tmpDragging",-1),n(this,"tmpMousePos",[0,0]),this.ws.onLibInit=(e,t)=>this.onLibInit(e,t);const e=document.getElementById("mapsMenu");e instanceof HTMLDivElement&&(this.objectPanelMenu=e);const t=document.getElementById("mapsAreaFilter");t instanceof HTMLDivElement&&(this.objectTargetFilterBtn=t.querySelector("div[data-value='unset']")),this.userMarker.userMarker.style.transform=`translate(${d.MAPS_RelativeX}px, ${d.MAPS_RelativeY}px) scale(${d.MAPS_PointScale})`,d.objectLayerPin instanceof HTMLDivElement&&this.appendUserMarker(d.objectLayerPin),this.mapElement=d.objectViewer,this.mapInfo=new Map([[0,"teyvat"],[1,"enkanomiya"],[2,"underground-mines"]]),this.mcEnsure=0,this.ws.onTrackEvent=(e,t)=>this.mapOnPos(e,t),d.objectViewer instanceof HTMLDivElement&&(d.objectViewer.addEventListener("mousedown",(e=>this.onMouseTouchDown(e))),d.objectViewer.addEventListener("touchstart",(e=>this.onMouseTouchDown(e))),d.objectViewer.addEventListener("mouseup",(e=>this.onMouseTouchUp(e))),d.objectViewer.addEventListener("touchend",(e=>this.onMouseTouchUp(e))),d.objectViewer.addEventListener("mousemove",(e=>this.onMouseTouchMove(e))),d.objectViewer.addEventListener("touchmove",(e=>this.onMouseTouchMove(e)))),function(e){const t=d.drawMapsScale;d.drawMapsScale=function(i){var s=t.apply(this,[i]);let o,a,c,r=e.userMarker.userMarker.style.transform;o=r.indexOf("scale")+5+1,a=r.indexOf(")",o),c=r.substring(o,a-o);let l=[d.MAPS_PointScale];return e.userMarker.userMarker.style.transform=r.substring(0,o)+l.join(", ")+r.substring(o+c.length),s};const i=d.changeMapsType;d.changeMapsType=function(t){let s;try{s=i.apply(this,[t]),e.onChangeMap.apply(e,[t]);}catch(n){console.error(n);}return s};}(this);}static get instance(){return a(e,t)||r(e,t,new e),a(e,t)}setFocusScroll(e,t){if(d.objectLayerBase instanceof HTMLDivElement&&d.objectViewer instanceof HTMLDivElement){let a=d.objectLayerBase.getClientRects()[0],c=d.objectViewer.getClientRects()[0];var i=d.MAPS_Size/100*(c.width/(a.width/100)),s=d.MAPS_Size/100*(c.height/(a.height/100)),n=(e-i/2)/100*d.MAPS_Scale,o=(t-s/2)/100*d.MAPS_Scale;d.objectViewer.scrollTo({top:o,left:n,behavior:"smooth"});}}setFocusPoint(e,t){if(d.objectLayerBase instanceof HTMLDivElement&&d.objectViewer instanceof HTMLDivElement){e+=d.MAPS_RelativeX,t+=d.MAPS_RelativeY;var i=d.objectLayerBase.getClientRects()[0],s=d.objectViewer.getClientRects()[0],n=d.MAPS_Size/100*(s.width/(i.width/100)),o=d.MAPS_Size/100*(s.height/(i.height/100)),a=(e-n/2)/100*d.MAPS_Scale,c=(t-o/2)/100*d.MAPS_Scale;d.objectViewer.scrollTo({top:c,left:a,behavior:"smooth"});}}mapOnPos(e,t){let{m:i,x:s,y:n,r:o,a:a,err:c}=t;if(c)this.dialog.alertDialog("GPS","위치를 얻는 도중 오류가 발생했습니다.",0,!0);else if(this.dialog.isShowing&&this.dialog.closeDialog(null,"위치를 얻는 도중 오류가 발생했습니다."),this.currentMap!==i)if(this.mcEnsure<10)this.mcEnsure=this.mcEnsure+1;else if(this.mcEnsure=0,this.currentMap=i,this.mapInfo.has(this.currentMap)){const e=this.mapInfo.get(this.currentMap);e&&this.onPlayerMovedMap(e);}else this.dialog.alertDialog("GPS","알 수 없는 지도입니다.",0,!0);else {const e=[n,s];switch(this.currentMap){case 0:default:e[0]=(e[0]+5890)/2,e[1]=(e[1]-2285)/2;break;case 1:e[0]=1.275*e[0]-670,e[1]=1.275*e[1]-2247;break;case 2:e[0]=1.275*e[0]-225,e[1]=1.275*e[1]-2060;}let t=[e[0],e[1]];if(t[0]=e[0]+d.MAPS_RelativeY-13,t[1]=e[1]+d.MAPS_RelativeX-8,this.isPinned){let t=Math.pow(this.focusPos[0]-e[0],2)+Math.pow(this.focusPos[1]-e[1],2);t=Math.sqrt(t),t>15&&(this.focusPos[0]=e[0],this.focusPos[1]=e[1],this.setFocusPoint(e[1],e[0]));}let i,c,r,l,h=this.userMarker.userMarker.style.transform;i="translate",c=this.userMarker.userMarker.style.transform.indexOf(i)+i.length+1,r=this.userMarker.userMarker.style.transform.indexOf(")",c),l=this.userMarker.userMarker.style.transform.substring(c,r);let g=[Math.round(t[1])+"px",Math.round(t[0])+"px"];this.userMarker.userMarker.style.transform=h.substring(0,c)+g.join(", ")+h.substring(c+l.length),this.userMarker.userMarkerIcon.style.setProperty("--dir",0-a+"deg"),this.userMarker.userMarkerIcon.style.setProperty("--rot",0-o+"deg");}}onPlayerMovedMap(e){const t=document.getElementById("mapsAreaFilter");this.objectTargetFilterBtn instanceof HTMLDivElement&&this.objectTargetFilterBtn.classList.remove("current-map"),t instanceof HTMLDivElement&&(this.objectTargetFilterBtn=t.querySelector(`div[data-value='${e}']`)),this.objectTargetFilterBtn instanceof HTMLDivElement&&this.objectTargetFilterBtn.classList.add("current-map"),this.isActive&&this.userMarker.userMarker&&(d.MAPS_Type!==e?(this.userMarker.userMarker.classList.add("hide"),this.setPinned(!1),this.dialog.alertDialog("GPS","플레이어의 현재 위치와 활성화된 지도가 다릅니다.",0,!0)):(this.userMarker.userMarker.classList.remove("hide"),this.dialog.closeDialog(null,"플레이어의 현재 위치와 활성화된 지도가 다릅니다.")));}onChangeMap(e,t=""){if(this.isActive&&this.userMarker.userMarker){d.MAPS_Type!==e?(this.userMarker.userMarker.classList.add("hide"),this.setPinned(!1),this.dialog.alertDialog("GPS","플레이어의 현재 위치와 활성화된 지도가 다릅니다.",0,!0)):(this.userMarker.userMarker.classList.remove("hide"),this.dialog.closeDialog(null,"플레이어의 현재 위치와 활성화된 지도가 다릅니다.")),this.objectTargetFilterBtn instanceof HTMLDivElement&&this.objectTargetFilterBtn.classList.remove("current-map");const t=document.getElementById("mapsAreaFilter");t instanceof HTMLDivElement&&(this.objectTargetFilterBtn=t.querySelector(`div[data-value='${this.mapInfo.get(this.currentMap)}']`)),this.objectTargetFilterBtn&&this.objectTargetFilterBtn.classList.add("current-map");}}setPinned(e){super.setPinned(e),this.isPinned&&this.mapInfo.get(this.currentMap)!==d.MAPS_Type&&d.changeMapsType(this.mapInfo.get(this.currentMap));}mouseMoveEvent(e){if(1==d.MAPS_ViewMobile)return;const t=this.userMarker.userMarker.getBoundingClientRect();let i=e.clientX-(t.left+window.scrollX),s=e.clientY-(t.top+window.scrollY);Math.sqrt(i*i+s*s)<=17.5/d.MAPS_PointScale?this.userMarker.userMarker.classList.add("hover"):this.userMarker.userMarker.classList.remove("hover");}onMouseTouchDown(e){this.ws.isSocketOpen()&&(this.tmpDragging=Date.now(),e instanceof MouseEvent?this.tmpMousePos=[e.clientX,e.clientY]:e instanceof TouchEvent&&(this.tmpMousePos=[e.touches[0].clientX,e.touches[0].clientY]));}onMouseTouchMove(e){if(this.ws.isSocketOpen()&&this.tmpDragging>0&&Date.now()-this.tmpDragging>100){let t=[0,0];e instanceof MouseEvent?t=[e.clientX,e.clientY]:e instanceof TouchEvent&&(t=[e.touches[0].clientX,e.touches[0].clientY]);const i=[Math.abs(t[0]-this.tmpMousePos[0]),Math.abs(t[1]-this.tmpMousePos[1])];(i[0]>20||i[1]>20)&&this.setPinned(!1);}}onMouseTouchUp(e){this.ws.isSocketOpen()&&(this.tmpDragging=-1);}onLibInit(e,t){document.body.addEventListener("mousemove",(e=>this.mouseMoveEvent(e)));}};c(y,t=new WeakMap);let E=y;(()=>{const e=E.instance;e.objectPanelMenu instanceof HTMLDivElement&&e.objectPanelMenu.appendChild(e.root);})();

})();